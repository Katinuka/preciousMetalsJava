<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Precious Metals Live</title>

    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

<!-- User Balance in Top Right Corner -->
<div class="user-info">
    <h3>User Information</h3>
    <p><strong>Username:</strong> <span th:text="${user.username}"></span></p>
    <ul>
        <!-- Loop through user's balance -->
        <li th:each="entry : ${user.balance}">
            <span th:text="${entry.key}"></span>:
            <span th:text="${entry.value}"></span>
        </li>
    </ul>
</div>

<!-- Metal Purchase/Sell Form -->
<div class="purchase-form">
    <h3 id="form-title">Buy Metals</h3>
    <form id="metal-transaction-form">
        <label for="transaction-type">Action:</label>
        <select id="transaction-type" name="transaction-type">
            <option value="buy">Buy</option>
            <option value="sell">Sell</option>
        </select>

        <label for="metal">Select Metal:</label>
        <select id="metal" name="metal">
            <option value="Gold">Gold</option>
            <option value="Silver">Silver</option>
            <option value="Platinum">Platinum</option>
            <option value="Palladium">Palladium</option>
        </select>

        <label for="ounces">Enter Ounces:</label>
        <input type="number" id="ounces" name="ounces" min="0.00" step="0.5">

        <p>Total Price: <span id="total-price">0.00</span> USD</p>
        <button type="button" onclick="performTransaction()">Submit</button>
    </form>
</div>



<!-- Main content area centered -->
<div class="content">

    <!-- Live Metal Prices in the center -->
    <div class="prices">
        <h2>Live Metal Prices</h2>
        <table>
            <thead>
            <tr>
                <th>Metal</th>
                <th>Price (USD)</th>
            </tr>
            </thead>
            <tbody id="price-table-body">
            <!-- Thymeleaf will populate the metal prices here -->
            <tr th:each="priceEntry : ${prices}">
                <td th:text="${priceEntry.key}"></td>
                <td th:text="${priceEntry.value}"></td>
            </tr>
            </tbody>
        </table>
    </div>

</div>
    <script type="module" src="/js/script.js"></script>
</body>
</html>